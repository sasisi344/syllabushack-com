<div class="hx:max-w-[800px] hx:mx-auto hx:mt-12 hx:px-4">
    <div class="hx:flex hx:flex-col hx:gap-6">
        {{- $pages := where .Site.RegularPages "Section" "blog" -}}
        {{- $recent := sort $pages "Date" "desc" | first 3 -}}
        {{- range $recent }}
        {{- $image := .Params.image | default "cover.png" -}}
        {{- $description := .Description | default .Summary | truncate 120 -}}
        {{- $link := .RelPermalink -}}
        {{- $title := .Title -}}

        <a class="hextra-card hx:group hx:flex hx:flex-col hx:md:flex-row hx:overflow-hidden hx:rounded-xl hx:border hx:border-gray-200 hx:text-current hx:no-underline hx:dark:border-neutral-800 hx:hover:border-gray-300 hx:dark:hover:border-neutral-700 hx:transition-all hx:duration-200 hx:bg-white hx:dark:bg-neutral-900"
            href="{{ $link }}">
            {{- if $image -}}
            {{- $imgResource := .Resources.Get $image -}}
            <div
                class="hx:relative hx:w-full hx:md:w-1/4 hx:aspect-video hx:md:aspect-[2.3/1] hx:overflow-hidden hx:bg-neutral-100 hx:dark:bg-neutral-800">
                {{- if $imgResource -}}
                {{- if eq $imgResource.MediaType.SubType "svg" -}}
                <img src="{{ $imgResource.RelPermalink }}" alt="{{ $title }}"
                    class="hx:h-full hx:w-full hx:object-cover hx:transition-transform hx:duration-300 hx:group-hover:scale-105"
                    loading="lazy">
                {{- else -}}
                {{- /* Flatter crop for title-only layout */ -}}
                {{- $processed := $imgResource.Fill "600x260 Center webp q80" -}}
                <img src="{{ $processed.RelPermalink }}" alt="{{ $title }}"
                    class="hx:h-full hx:w-full hx:object-cover hx:transition-transform hx:duration-300 hx:group-hover:scale-105"
                    loading="lazy">
                {{- end -}}
                {{- else -}}
                <img src="{{ relURL $image }}" alt="{{ $title }}"
                    class="hx:h-full hx:w-full hx:object-cover hx:transition-transform hx:duration-300 hx:group-hover:scale-105"
                    loading="lazy">
                {{- end -}}
            </div>
            {{- end -}}
            <div class="hx:p-4 hx:flex hx:flex-col hx:justify-center hx:flex-grow hx:md:w-3/4">
                <h4
                    class="hx:font-bold hx:text-base hx:leading-snug hx:group-hover:text-primary-600 hx:transition-colors">
                    {{ $title }}</h4>
                <div class="hx:mt-2 hx:flex hx:items-center hx:justify-between">
                    <span class="hx:text-xs hx:opacity-50">{{ .Date.Format "2006.01.02" }}</span>
                    <span class="hx:text-xs hx:text-primary-600 hx:font-medium">Read more â†’</span>
                </div>
            </div>
        </a>
        {{- end }}
    </div>
</div>